<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Par-3 Map (Viewer Only — with Pins)</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  <style>
  /* Base (copied from Schedule head) */
  :root { --bg:#fff; --fg:#111827; --muted:#64748b; --border:#e5e7eb; }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);color:var(--fg)}
  .wrap{max-width:860px;margin:0 auto;padding:24px}
  .muted{color:var(--muted)}
  .card{border:1px solid var(--border);border-radius:14px;padding:16px;background:#fff}
  a.pill{ text-decoration:none; text-align:center; padding:10px 12px; border-radius:999px; border:1px solid var(--border); background:#fff; color:#000 }

  /* Header (simple, clean—like your Schedule page) */
  .topbar{position:sticky;top:0;z-index:100;background:#fff;border-bottom:1px solid var(--border)}

  /* Map fills everything under the header */
  :root { --topbar-h: 72px; } /* ≈ .wrap 24px padding + content; adjust if needed */
  #map{
    position:fixed;
    top:var(--topbar-h);
    left:0; right:0; bottom:0;
    width:100vw;
  }

  /* Leaflet pin styling (unchanged) */
  .leaflet-div-icon{
    background:#ef4444;border:2px solid #991b1b;border-radius:14px;width:28px;height:28px;
    display:grid;place-items:center;box-shadow:0 2px 6px rgba(0,0,0,.35)
  }
  .pin-num{font-weight:800;color:#fff;font-size:13px}
</style>

</head>
<body>

  <!-- Top navigation (matches Schedule/Event Hub) -->
 <header class="topbar">
  <div class="wrap" style="display:flex;align-items:center;justify-content:space-between;gap:12px">
     <nav>
      <a href="/" class="pill">← Home</a>
    </nav>
    <div style="font-weight:700">Par 3 Contest Tee Locations</div>
     </div>
</header>


  <!-- Map -->
  <div id="map"></div>

  <script>
  // === Map (viewer-only) ===
  const COURSE_CENTER = [38.5415, -121.6898]; // El Macero default center

  const map = L.map('map', { zoomControl: true, preferCanvas: true })
    .setView(COURSE_CENTER, 16);

  // Satellite by default
  L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
    maxZoom: 19,
    attribution: 'Esri, Maxar, Earthstar Geographics'
  }).addTo(map);

  // Ensure layout is measured after first paint
  setTimeout(() => map.invalidateSize(), 0);

  // Numbered red pin factory
  function numIcon(n){
    return L.divIcon({
      className: 'leaflet-div-icon',
      html: `<span class="pin-num">${n}</span>`,
      iconSize: [28,28], iconAnchor: [14,28], popupAnchor: [0,-24]
    });
  }

  // === Fixed hole locations (viewer-only; not draggable) ===
  const teeData = [
    { label: '1',  lat: 38.54279952260164,  lng: -121.68821275234224,  note: '' },
    { label: '2',  lat: 38.54346277501878,  lng: -121.69210731983186,  note: '' },
    { label: '3',  lat: 38.54246810039788,  lng: -121.69372737407684,  note: '' },
    { label: '4',  lat: 38.54074743850638,  lng: -121.68917834758759,  note: '' },
    { label: '5',  lat: 38.54237159894059,  lng: -121.68487608432771,  note: '' },
    { label: '6',  lat: 38.54405037288541,  lng: -121.67832076549531,  note: '' },
    { label: '7',  lat: 38.54208198287809,  lng: -121.6777789592743,   note: '' },
    { label: '8',  lat: 38.540843753586195, lng: -121.6789484024048,   note: '' },
    { label: '9',  lat: 38.54287528770029,  lng: -121.6833794116974,   note: '' },
    { label: '10', lat: 38.54347961882987,  lng: -121.68827176094057,  note: '' },
    { label: '11', lat: 38.543953765967665, lng: -121.69360399246217,  note: '' },
    { label: '12', lat: 38.54542268836741,  lng: -121.693212389946,    note: '' },
    { label: '13', lat: 38.54728168383763,  lng: -121.68937146663667,  note: '' },
    { label: '14', lat: 38.54524220241451,  lng: -121.68734371662141,  note: '' },
    { label: '15', lat: 38.547151740287816, lng: -121.68231189250947,  note: '' },
    { label: '16', lat: 38.546983815223385, lng: -121.68176472187044,  note: '' },
    { label: '17', lat: 38.54402081575977,  lng: -121.67813301086427,  note: '' },
    { label: '18', lat: 38.54481736818766, lng: -121.68243527412416,  note: '' }
  ];

  const markers = [];
  teeData.forEach((t,i)=>{
    const m = L.marker([t.lat, t.lng], { icon: numIcon(t.label || (i+1)) })
      .bindPopup(`<b>Tee ${t.label||i+1}</b>${t.note?('<br>'+t.note):''}`)
      .addTo(map);
    markers.push(m);
  });

  // Fit to all pins initially
  if (markers.length){
    const group = L.featureGroup(markers);
    map.fitBounds(group.getBounds().pad(0.2));
  }

  // === GPS locate (HTTPS required on mobile) ===
  try {
    map.locate({ setView: false, maxZoom: 17, enableHighAccuracy: true, timeout: 8000 });

    map.on('locationfound', (e) => {
      L.circleMarker(e.latlng, {
        radius: 6, color: 'blue', fillColor: 'blue', fillOpacity: 0.75, weight: 2
      }).bindPopup('You are here').addTo(map);
    });

    map.on('locationerror', (err) => {
      console.log('Location error:', err && err.message ? err.message : err);
    });
  } catch (e) {
    console.log('Geolocation not available in this context.');
  }
  </script>
</body>
</html>
